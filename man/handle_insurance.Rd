% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/insurance.R
\name{handle_insurance}
\alias{handle_insurance}
\title{Handle insurance offers and dealer blackjack check}
\usage{
handle_insurance(dealer_hand, players, input_fun = readline, ai_prob = 0.5)
}
\arguments{
\item{dealer_hand}{A \code{blackjack_hand} object for the dealer.}

\item{players}{Named list of players (each with is_computer, coins, bets, etc.).}

\item{input_fun}{Function for user input (default: readline).}

\item{ai_prob}{Numeric, probability of AI buying insurance (default 0.5).}
}
\value{
A list with:
  \describe{
    \item{dealer_blackjack}{Logical: whether the dealer has Blackjack.}
    \item{players}{Updated player list after insurance resolution.}
  }
}
\description{
Offers insurance to all players if the dealer's upcard is an Ace,
and settles insurance bets depending on whether the dealer has a Blackjack.
Also reveals the dealer's hand if the upcard is a 10-value card and the dealer has Blackjack.
}
\examples{
\dontrun{
# Example: dealer showing Ace, with player and computer
players <- list(
  Alice = list(is_computer = FALSE, coins = 1000, bets = 100),
  Bot = list(is_computer = TRUE, coins = 1000, bets = 100)
)
dealer_hand <- new_blackjack_hand(c("A♠", "10♦"))
handle_insurance(dealer_hand, players)
}
}
